// ======================================================================
// \title  ApidSequenceCountPortAc.hpp
// \author Generated by fpp-to-cpp
// \brief  hpp file for ApidSequenceCount port
// ======================================================================

#ifndef Svc_Ccsds_ApidSequenceCountPortAc_HPP
#define Svc_Ccsds_ApidSequenceCountPortAc_HPP

#include <cstdio>
#include <cstring>

#include "Fw/Comp/PassiveComponentBase.hpp"
#include "Fw/FPrimeBasicTypes.hpp"
#include "Fw/Port/InputPortBase.hpp"
#include "Fw/Port/OutputPortBase.hpp"
#include "Fw/Types/String.hpp"
#include "default/config/ApidEnumAc.hpp"

namespace Svc {

  namespace Ccsds {

    //! Input ApidSequenceCount port
    //! Port for requesting a sequence count for a given APID
    class InputApidSequenceCountPort :
      public Fw::InputPortBase
    {

      public:

        // ----------------------------------------------------------------------
        // Constants
        // ----------------------------------------------------------------------

        enum {
          //! The size of the serial representations of the port arguments
          SERIALIZED_SIZE =
            ComCfg::Apid::SERIALIZED_SIZE +
            sizeof(U16)
        };

      public:

        // ----------------------------------------------------------------------
        // Types
        // ----------------------------------------------------------------------

        //! The port callback function type
        typedef U16 (*CompFuncPtr)(
          Fw::PassiveComponentBase* callComp,
          FwIndexType portNum,
          const ComCfg::Apid& apid,
          U16 sequenceCount
        );

      public:

        // ----------------------------------------------------------------------
        // Input Port Member functions
        // ----------------------------------------------------------------------

        //! Constructor
        InputApidSequenceCountPort();

        //! Initialization function
        void init();

        //! Register a component
        void addCallComp(
            Fw::PassiveComponentBase* callComp, //!< The containing component
            CompFuncPtr funcPtr //!< The port callback function
        );

        //! Invoke a port interface
        U16 invoke(
            const ComCfg::Apid& apid,
            U16 sequenceCount
        );

      private:

#if FW_PORT_SERIALIZATION == 1

        //! Invoke the port with serialized arguments
        Fw::SerializeStatus invokeSerial(Fw::LinearBufferBase& _buffer);

#endif

      private:

        // ----------------------------------------------------------------------
        // Member variables
        // ----------------------------------------------------------------------

        //! The pointer to the port callback function
        CompFuncPtr m_func;

    };

    //! Output ApidSequenceCount port
    //! Port for requesting a sequence count for a given APID
    class OutputApidSequenceCountPort :
      public Fw::OutputPortBase
    {

      public:

        // ----------------------------------------------------------------------
        // Output Port Member functions
        // ----------------------------------------------------------------------

        //! Constructor
        OutputApidSequenceCountPort();

        //! Initialization function
        void init();

        //! Register an input port
        void addCallPort(
            InputApidSequenceCountPort* callPort //!< The input port
        );

        //! Invoke a port interface
        U16 invoke(
            const ComCfg::Apid& apid,
            U16 sequenceCount
        ) const;

      private:

        // ----------------------------------------------------------------------
        // Member variables
        // ----------------------------------------------------------------------

        //! The pointer to the input port
        InputApidSequenceCountPort* m_port;

    };

  }

}

#endif
