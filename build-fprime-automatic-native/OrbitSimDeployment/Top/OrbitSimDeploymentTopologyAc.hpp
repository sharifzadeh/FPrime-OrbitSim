// ======================================================================
// \title  OrbitSimDeploymentTopologyAc.hpp
// \author Generated by fpp-to-cpp
// \brief  hpp file for OrbitSimDeployment topology
// ======================================================================

#ifndef OrbitSimDeployment_OrbitSimDeploymentTopologyAc_HPP
#define OrbitSimDeployment_OrbitSimDeploymentTopologyAc_HPP

#include "Components/MorseBlinker/MorseBlinker.hpp"
#include "Drv/TcpServer/TcpServer.hpp"
#include "OrbitSimDeployment/Top/OrbitSimDeploymentTopologyDefs.hpp"
#include "Svc/ActiveRateGroup/ActiveRateGroup.hpp"
#include "Svc/AssertFatalAdapter/AssertFatalAdapter.hpp"
#include "Svc/BufferManager/BufferManager.hpp"
#include "Svc/Ccsds/ApidManager/ApidManager.hpp"
#include "Svc/Ccsds/SpacePacketDeframer/SpacePacketDeframer.hpp"
#include "Svc/Ccsds/SpacePacketFramer/SpacePacketFramer.hpp"
#include "Svc/Ccsds/TcDeframer/TcDeframer.hpp"
#include "Svc/Ccsds/TmFramer/TmFramer.hpp"
#include "Svc/ChronoTime/ChronoTime.hpp"
#include "Svc/CmdDispatcher/CommandDispatcher.hpp"
#include "Svc/CmdSequencer/CmdSequencer.hpp"
#include "Svc/ComAggregator/ComAggregator.hpp"
#include "Svc/ComQueue/ComQueue.hpp"
#include "Svc/ComStub/ComStub.hpp"
#include "Svc/DpCatalog/DpCatalog.hpp"
#include "Svc/DpManager/DpManager.hpp"
#include "Svc/DpWriter/DpWriter.hpp"
#include "Svc/EventManager/EventManager.hpp"
#include "Svc/FatalHandler/FatalHandler.hpp"
#include "Svc/FileDownlink/FileDownlink.hpp"
#include "Svc/FileManager/FileManager.hpp"
#include "Svc/FileUplink/FileUplink.hpp"
#include "Svc/FprimeRouter/FprimeRouter.hpp"
#include "Svc/FrameAccumulator/FrameAccumulator.hpp"
#include "Svc/Health/Health.hpp"
#include "Svc/LinuxTimer/LinuxTimer.hpp"
#include "Svc/PassiveConsoleTextLogger/PassiveTextLogger.hpp"
#include "Svc/PrmDb/PrmDb.hpp"
#include "Svc/RateGroupDriver/RateGroupDriver.hpp"
#include "Svc/SystemResources/SystemResources.hpp"
#include "Svc/TlmChan/TlmChan.hpp"
#include "Svc/Version/Version.hpp"

// ----------------------------------------------------------------------
// Component instances
// ----------------------------------------------------------------------

namespace CdhCore {

  //! cmdDisp
  extern Svc::CommandDispatcher cmdDisp;

}

namespace CdhCore {

  //! events
  extern Svc::EventManager events;

}

namespace CdhCore {

  //! fatalAdapter
  extern Svc::AssertFatalAdapter fatalAdapter;

}

namespace CdhCore {

  //! fatalHandler
  extern Svc::FatalHandler fatalHandler;

}

namespace CdhCore {

  //! health
  extern Svc::Health health;

}

namespace CdhCore {

  //! textLogger
  extern Svc::PassiveTextLogger textLogger;

}

namespace CdhCore {

  //! tlmSend
  extern Svc::TlmChan tlmSend;

}

namespace CdhCore {

  //! version
  extern Svc::Version version;

}

namespace ComCcsds {

  //! aggregator
  extern Svc::ComAggregator aggregator;

}

namespace ComCcsds {

  //! apidManager
  extern Svc::Ccsds::ApidManager apidManager;

}

namespace ComCcsds {

  //! comQueue
  extern Svc::ComQueue comQueue;

}

namespace ComCcsds {

  //! comStub
  extern Svc::ComStub comStub;

}

namespace ComCcsds {

  //! commsBufferManager
  extern Svc::BufferManager commsBufferManager;

}

namespace ComCcsds {

  //! fprimeRouter
  extern Svc::FprimeRouter fprimeRouter;

}

namespace ComCcsds {

  //! frameAccumulator
  extern Svc::FrameAccumulator frameAccumulator;

}

namespace ComCcsds {

  //! framer
  extern Svc::Ccsds::TmFramer framer;

}

namespace ComCcsds {

  //! spacePacketDeframer
  extern Svc::Ccsds::SpacePacketDeframer spacePacketDeframer;

}

namespace ComCcsds {

  //! spacePacketFramer
  extern Svc::Ccsds::SpacePacketFramer spacePacketFramer;

}

namespace ComCcsds {

  //! tcDeframer
  extern Svc::Ccsds::TcDeframer tcDeframer;

}

namespace DataProducts {

  //! dpBufferManager
  extern Svc::BufferManager dpBufferManager;

}

namespace DataProducts {

  //! dpCat
  extern Svc::DpCatalog dpCat;

}

namespace DataProducts {

  //! dpMgr
  extern Svc::DpManager dpMgr;

}

namespace DataProducts {

  //! dpWriter
  extern Svc::DpWriter dpWriter;

}

namespace FileHandling {

  //! fileDownlink
  extern Svc::FileDownlink fileDownlink;

}

namespace FileHandling {

  //! fileManager
  extern Svc::FileManager fileManager;

}

namespace FileHandling {

  //! fileUplink
  extern Svc::FileUplink fileUplink;

}

namespace FileHandling {

  //! prmDb
  extern Svc::PrmDb prmDb;

}

namespace OrbitSimDeployment {

  //! chronoTime
  extern Svc::ChronoTime chronoTime;

}

namespace OrbitSimDeployment {

  //! cmdSeq
  extern Svc::CmdSequencer cmdSeq;

}

namespace OrbitSimDeployment {

  //! comDriver
  extern Drv::TcpServer comDriver;

}

namespace OrbitSimDeployment {

  //! morseBlinker
  extern Components::MorseBlinker morseBlinker;

}

namespace OrbitSimDeployment {

  //! rateGroup1
  extern Svc::ActiveRateGroup rateGroup1;

}

namespace OrbitSimDeployment {

  //! rateGroup2
  extern Svc::ActiveRateGroup rateGroup2;

}

namespace OrbitSimDeployment {

  //! rateGroup3
  extern Svc::ActiveRateGroup rateGroup3;

}

namespace OrbitSimDeployment {

  //! rateGroupDriver
  extern Svc::RateGroupDriver rateGroupDriver;

}

namespace OrbitSimDeployment {

  //! systemResources
  extern Svc::SystemResources systemResources;

}

namespace OrbitSimDeployment {

  //! timer
  extern Svc::LinuxTimer timer;

}

namespace OrbitSimDeployment {

  // ----------------------------------------------------------------------
  // Constants
  // ----------------------------------------------------------------------

  namespace ConfigConstants {
    namespace CdhCore_health {
      enum {
          HEALTH_WATCHDOG_CODE = 0x123
      };
    }
  }

  namespace BaseIds {
    enum {
      OrbitSimDeployment_morseBlinker = 0x200,
      CdhCore_cmdDisp = 0x1000000,
      CdhCore_events = 0x1001000,
      CdhCore_health = 0x1002000,
      CdhCore_version = 0x1003000,
      CdhCore_textLogger = 0x1004000,
      CdhCore_fatalAdapter = 0x1005000,
      CdhCore_tlmSend = 0x1006000,
      CdhCore_fatalHandler = 0x1007000,
      ComCcsds_comQueue = 0x2000000,
      ComCcsds_frameAccumulator = 0x2001000,
      ComCcsds_commsBufferManager = 0x2002000,
      ComCcsds_fprimeRouter = 0x2003000,
      ComCcsds_tcDeframer = 0x2004000,
      ComCcsds_spacePacketDeframer = 0x2005000,
      ComCcsds_aggregator = 0x2006000,
      ComCcsds_framer = 0x2007000,
      ComCcsds_spacePacketFramer = 0x2008000,
      ComCcsds_apidManager = 0x2009000,
      ComCcsds_comStub = 0x200A000,
      DataProducts_dpCat = 0x4000000,
      DataProducts_dpMgr = 0x4001000,
      DataProducts_dpWriter = 0x4002000,
      DataProducts_dpBufferManager = 0x4003000,
      FileHandling_fileUplink = 0x5000000,
      FileHandling_fileDownlink = 0x5001000,
      FileHandling_fileManager = 0x5002000,
      FileHandling_prmDb = 0x5003000,
      OrbitSimDeployment_rateGroup1 = 0x10001000,
      OrbitSimDeployment_rateGroup2 = 0x10002000,
      OrbitSimDeployment_rateGroup3 = 0x10003000,
      OrbitSimDeployment_cmdSeq = 0x10004000,
      OrbitSimDeployment_chronoTime = 0x10010000,
      OrbitSimDeployment_rateGroupDriver = 0x10011000,
      OrbitSimDeployment_systemResources = 0x10012000,
      OrbitSimDeployment_timer = 0x10013000,
      OrbitSimDeployment_comDriver = 0x10014000,
    };
  }

  namespace InstanceIds {
    enum {
      CdhCore_cmdDisp,
      CdhCore_events,
      CdhCore_fatalAdapter,
      CdhCore_fatalHandler,
      CdhCore_health,
      CdhCore_textLogger,
      CdhCore_tlmSend,
      CdhCore_version,
      ComCcsds_aggregator,
      ComCcsds_apidManager,
      ComCcsds_comQueue,
      ComCcsds_comStub,
      ComCcsds_commsBufferManager,
      ComCcsds_fprimeRouter,
      ComCcsds_frameAccumulator,
      ComCcsds_framer,
      ComCcsds_spacePacketDeframer,
      ComCcsds_spacePacketFramer,
      ComCcsds_tcDeframer,
      DataProducts_dpBufferManager,
      DataProducts_dpCat,
      DataProducts_dpMgr,
      DataProducts_dpWriter,
      FileHandling_fileDownlink,
      FileHandling_fileManager,
      FileHandling_fileUplink,
      FileHandling_prmDb,
      OrbitSimDeployment_chronoTime,
      OrbitSimDeployment_cmdSeq,
      OrbitSimDeployment_comDriver,
      OrbitSimDeployment_morseBlinker,
      OrbitSimDeployment_rateGroup1,
      OrbitSimDeployment_rateGroup2,
      OrbitSimDeployment_rateGroup3,
      OrbitSimDeployment_rateGroupDriver,
      OrbitSimDeployment_systemResources,
      OrbitSimDeployment_timer,
    };
  }

  namespace Priorities {
    enum {
      CdhCore_cmdDisp = 35,
      CdhCore_events = 23,
      CdhCore_tlmSend = 22,
      ComCcsds_comQueue = 29,
      DataProducts_dpCat = 24,
      DataProducts_dpMgr = 23,
      DataProducts_dpWriter = 22,
      FileHandling_fileDownlink = 23,
      FileHandling_fileManager = 22,
      FileHandling_fileUplink = 24,
      FileHandling_prmDb = 21,
      OrbitSimDeployment_cmdSeq = 117,
      OrbitSimDeployment_morseBlinker = 100,
      OrbitSimDeployment_rateGroup1 = 120,
      OrbitSimDeployment_rateGroup2 = 119,
      OrbitSimDeployment_rateGroup3 = 118,
    };
  }

  namespace QueueSizes {
    enum {
      CdhCore_cmdDisp = 10,
      CdhCore_events = 10,
      CdhCore_health = 25,
      CdhCore_tlmSend = 10,
      ComCcsds_aggregator = 10,
      ComCcsds_comQueue = 50,
      DataProducts_dpCat = 10,
      DataProducts_dpMgr = 10,
      DataProducts_dpWriter = 10,
      FileHandling_fileDownlink = 10,
      FileHandling_fileManager = 10,
      FileHandling_fileUplink = 10,
      FileHandling_prmDb = 10,
      OrbitSimDeployment_cmdSeq = 10,
      OrbitSimDeployment_morseBlinker = 10,
      OrbitSimDeployment_rateGroup1 = 10,
      OrbitSimDeployment_rateGroup2 = 10,
      OrbitSimDeployment_rateGroup3 = 10,
    };
  }

  namespace StackSizes {
    enum {
      CdhCore_cmdDisp = 65536,
      CdhCore_events = 65536,
      CdhCore_tlmSend = 65536,
      ComCcsds_aggregator = 65536,
      ComCcsds_comQueue = 65536,
      DataProducts_dpCat = 65536,
      DataProducts_dpMgr = 65536,
      DataProducts_dpWriter = 65536,
      FileHandling_fileDownlink = 65536,
      FileHandling_fileManager = 65536,
      FileHandling_fileUplink = 65536,
      FileHandling_prmDb = 65536,
      OrbitSimDeployment_cmdSeq = 65536,
      OrbitSimDeployment_morseBlinker = 65536,
      OrbitSimDeployment_rateGroup1 = 65536,
      OrbitSimDeployment_rateGroup2 = 65536,
      OrbitSimDeployment_rateGroup3 = 65536,
    };
  }

  namespace TaskIds {
    enum {
      CdhCore_cmdDisp,
      CdhCore_events,
      CdhCore_tlmSend,
      ComCcsds_aggregator,
      ComCcsds_comQueue,
      DataProducts_dpCat,
      DataProducts_dpMgr,
      DataProducts_dpWriter,
      FileHandling_fileDownlink,
      FileHandling_fileManager,
      FileHandling_fileUplink,
      FileHandling_prmDb,
      OrbitSimDeployment_cmdSeq,
      OrbitSimDeployment_morseBlinker,
      OrbitSimDeployment_rateGroup1,
      OrbitSimDeployment_rateGroup2,
      OrbitSimDeployment_rateGroup3,
    };
  }

  // ----------------------------------------------------------------------
  // Component configuration objects
  // ----------------------------------------------------------------------

  namespace ConfigObjects {

    namespace CdhCore_health {
      //!< Number of entries in the pingEntryies array
      constexpr FwSizeType NUM_PING_ENTRIES = 12;
      //!< Ping entry configuration for Svc::Health
      extern Svc::Health::PingEntry pingEntries[NUM_PING_ENTRIES];
    }

  }

  // ----------------------------------------------------------------------
  // Helper functions
  // ----------------------------------------------------------------------

  //! Initialize components
  void initComponents(
      const TopologyState& state //!< The topology state
  );

  //! Configure components
  void configComponents(
      const TopologyState& state //!< The topology state
  );

  //! Set component base Ids
  void setBaseIds();

  //! Connect components
  void connectComponents();

  //! Register commands
  void regCommands();

  //! Read parameters
  void readParameters();

  //! Load parameters
  void loadParameters();

  //! Start tasks
  void startTasks(
      const TopologyState& state //!< The topology state
  );

  //! Stop tasks
  void stopTasks(
      const TopologyState& state //!< The topology state
  );

  //! Free threads
  void freeThreads(
      const TopologyState& state //!< The topology state
  );

  //! Tear down components
  void tearDownComponents(
      const TopologyState& state //!< The topology state
  );

  // ----------------------------------------------------------------------
  // Setup and teardown functions
  // ----------------------------------------------------------------------

  //! Set up the topology
  void setup(
      const TopologyState& state //!< The topology state
  );

  //! Tear down the topology
  void teardown(
      const TopologyState& state //!< The topology state
  );

}

#endif
